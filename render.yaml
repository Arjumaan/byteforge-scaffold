services:
  # Backend API runs in Docker container (with Go tools installed)
  - type: web
    name: byteforge-api
    runtime: docker
    repo: https://github.com/Arjumaan/byteforge-scaffold
    rootDir: backend
    plan: free
    branch: main
    envVars:
      - key: PORT
        value: 10000
      - key: ALLOWED_HOSTS
        value: "*"
    # For persistence, add a Disk or use external Postgres
    # disk:
    #   name: byteforge-data
    #   mountPath: /app/data
    #   sizeGB: 1

  # Frontend runs as Static Site
  - type: static
    name: byteforge-ui
    repo: https://github.com/Arjumaan/byteforge-scaffold
    rootDir: frontend
    branch: main
    buildCommand: npm install && npm run build
    publishDir: dist
    routes:
      - type: rewrite
        source: /*
        destination: /index.html
